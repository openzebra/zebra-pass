import { StyleMetrics , Button} from "std-widgets.slint";
import { Theme } from "../theme.slint";

export component ZButton {
  in property <bool> hovered: true;
  in property <string> text;
  in-out property <color> background;
  in-out property <color> color;
  in-out property <length> font-size : Theme.font-size-medium;
  in-out property<bool> enabled : true;
  in property <color> border-color : root.background;

  callback clicked;

  touch := TouchArea {
    mouse-cursor: default;
    clicked => {
      if (root.enabled) {
        clicked();
      }
    }
  }
  rect := Rectangle {
    background: root.background;

    border-color: root.border-color;
    border-width: 1pt;
    border-radius: Theme.radius-regular;

    preferred-width: 360pt;
    preferred-height: 56pt;
  }
  label := Text {
    color: root.color;
    text: root.text;
    font-size: root.font-size;
    font-weight: Theme.font-weight-bold;
    horizontal-alignment: center;
    opacity: 1;
  }

  states [
    active when root.enabled && hovered && touch.has-hover: {
        label.color: root.background;
        rect.background: Colors.transparent;
        rect.border-color: root.border-color;
        touch.mouse-cursor: pointer;
        in {
          animate rect.background { duration: 150ms; }
        }
    }
    disabled when !root.enabled : {
      label.opacity: 0.2;
      rect.background: root.background.darker(70%);
      rect.border-color: root.border-color.darker(70%);
      touch.mouse-cursor: default;

      out {
          animate * { duration: 300ms; }
      }
    }
  ]
}